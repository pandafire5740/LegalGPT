<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Final Markdown Test</title>
    <script src="https://cdn.jsdelivr.net/npm/marked@12.0.0/marked.min.js"></script>
    <link href="/static/styles.css" rel="stylesheet">
</head>
<body>
    <div style="padding: 2rem; max-width: 800px; margin: 0 auto;">
        <h1>Final Markdown Rendering Test</h1>
        
        <div style="border: 2px solid #000; padding: 1rem; margin: 1rem 0;">
            <h2>Test Output:</h2>
            <div class="message assistant">
                <div class="message-content" id="output"></div>
            </div>
        </div>
        
        <div style="border: 1px solid #ccc; padding: 1rem; margin: 1rem 0; background: #f5f5f5;">
            <h3>Generated HTML:</h3>
            <pre id="html" style="white-space: pre-wrap;"></pre>
        </div>
    </div>

    <script>
        const md = `**Test**

- One
- Two
- Three`;

        if (typeof marked.use === 'function') {
            marked.use({ breaks: true, gfm: true });
        } else if (typeof marked.setOptions === 'function') {
            marked.setOptions({ breaks: true, gfm: true });
        }

        const html = marked.parse(md);
        document.getElementById("output").innerHTML = html;
        document.getElementById("html").textContent = html;
        
        console.log('HTML:', html);
        
        setTimeout(() => {
            const output = document.getElementById("output");
            const ul = output.querySelector('ul');
            const lis = output.querySelectorAll('li');
            const p = output.querySelector('p');
            
            console.log('Elements found:');
            console.log('  P:', !!p, p ? p.textContent : 'none');
            console.log('  UL:', !!ul);
            console.log('  LIs:', lis.length);
            
            if (ul) {
                const styles = window.getComputedStyle(ul);
                console.log('UL computed styles:', {
                    display: styles.display,
                    listStyleType: styles.listStyleType,
                    paddingLeft: styles.paddingLeft,
                    marginTop: styles.marginTop,
                    marginBottom: styles.marginBottom
                });
            }
        }, 100);
    </script>
</body>
</html>
